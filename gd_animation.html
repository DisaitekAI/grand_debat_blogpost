<!DOCTYPE html>
<html>
  <head>
    <!-- Load D3 from site -->
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  </head>

    <!-- CSS (Styling) -->
    <style type="text/css">
            /* Format X and Y Axis */
            .axis path,
            .axis line {
                fill: none;
                stroke: black;
                shape-rendering: crispEdges;
            }

            .axis text {
                font-family: sans-serif;
                font-size: 11px;
            }
    </style>
    <!-- End CSS (Styling) -->

  <body>
    <h2>D3 Scatterplot </h2>
    <p>This is a data visualization using transitions with a scatterplot</p>
    <h4>Click on this text to update chart with new values</h4>
    <h3></h3>

  <!-- Begin D3 Javascript -->
  <script type="text/javascript">
   d3.csv('./gd_animation.csv', function loadCallback(error, data) {
       data.forEach(function(d){
           d.x      = +d.x;
           d.y      = +d.y;
           d.init_x = +d.init_x;
           d.init_y = +d.init_y;
       });
       console.log(data);
       makeViz(data);
   });

   var makeViz = function(dataset) {
       // Setup settings for graphic
       var canvas_width = 1000;
       var canvas_height = 600;
       var padding = 30;  // for chart edges

       // Create scale functions
       var xScale = d3.scale.linear()  // xScale is width of graphic
                      .domain([
                          d3.min(dataset, function(d) {
                              return d.x;  // input domain
                          }),
                          d3.max(dataset, function(d) {
                              return d.x;  // input domain
                          })
                      ])
                      .range([padding, canvas_width - padding * 2]); // output range

       var yScale = d3.scale.linear()  // yScale is height of graphic
                      .domain([
                          d3.min(dataset, function(d) {
                              return d.y;  // input domain
                          }),
                          d3.max(dataset, function(d) {
                              return d.y;  // input domain
                          })
                      ])
                      .range([canvas_height - padding, padding]);  // remember y starts on top going down so we flip

       // Define X axis
       var xAxis = d3.svg.axis()
                     .scale(xScale)
                     .orient("bottom")
                     .ticks(5);

       // Define Y axis
       var yAxis = d3.svg.axis()
                     .scale(yScale)
                     .orient("left")
                     .ticks(5);
       // Create SVG element
       var svg = d3.select("h3")  // This is where we put our vis
                   .append("svg")
                   .attr("width", canvas_width)
                   .attr("height", canvas_height)

       // Create Circles
       svg.selectAll("circle")
                   .data(dataset)
                   .enter()
                   .append("circle")  // Add circle svg
                   .attr("cx", function(d) {
                       return xScale(d.x);  // Circle's X
                   })
                   .attr("cy", function(d) {  // Circle's Y
                       return yScale(d.y);
                   })
                   .attr("r", 2);  // radius

       // Add to X axis
       svg.append("g")
          .attr("class", "x axis")
          .attr("transform", "translate(0," + (canvas_height - padding) +")")
          .call(xAxis);

       // Add to Y axis
       svg.append("g")
          .attr("class", "y axis")
          .attr("transform", "translate(" + padding +",0)")
          .call(yAxis);
   };
  </script>
  </body>
</html>
